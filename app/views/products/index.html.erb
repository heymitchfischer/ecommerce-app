<h1><%= @category ? "Showing Results for '#{@category.name}'" : "All Products" %></h1>

<%= form_tag("/products", method: :get) do %>
  <%= label_tag(:category_id, "Select a Product Category to search by:") %>
  <%= select_tag(:category_id, options_from_collection_for_select(@categories, :id, :name, @category ? @category.id : nil), prompt: "Select Product Category") %>
  <%= submit_tag("Search") %>
<% end %>

<% @products.each do |product| %>
  <div class="product">
    <h3><%= product.name %></h3>
    <p><%= product.price_format %></p>
    <%= link_to("/products/#{product.id}") do %>
      <%= image_tag(product.image_url) %>
    <% end %>
  </div>
<% end %>